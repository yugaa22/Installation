CREATE SCHEMA `orca` DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
CREATE USER 'orca_migrate'@'%'IDENTIFIED BY 'OpsMx@123';
CREATE USER 'orca_service'@'%' IDENTIFIED BY 'OpsMx@123';
SET GLOBAL TRANSACTION ISOLATION LEVEL READ COMMITTED;
SET TRANSACTION ISOLATION LEVEL READ COMMITTED;

GRANT SELECT, INSERT, UPDATE, DELETE, EXECUTE, SHOW VIEW ON `orca`.* TO 'orca_service'@'%';
GRANT SELECT, INSERT, UPDATE, DELETE, CREATE, DROP, REFERENCES, INDEX, ALTER, LOCK TABLES,EXECUTE, SHOW VIEW ON `orca`.* TO 'orca_migrate'@'%';
GRANT ALL PRIVILEGES ON *.* TO 'orca_migrate'@'%';
GRANT ALL PRIVILEGES ON *.* TO 'orca_service'@'%';
GRANT ALL PRIVILEGES ON *.* TO 'orca'@'%';
flush privileges;

GRANT ALL ON *.* TO 'orca'@'%' IDENTIFIED BY 'OpsMx@123' WITH GRANT OPTION;
GRANT ALL ON *.* TO 'orca_migrate'@'%' IDENTIFIED BY 'OpsMx@123' WITH GRANT OPTION;
GRANT ALL ON *.* TO 'orca_service'@'%' IDENTIFIED BY 'OpsMx@123' WITH GRANT OPTION;
//place orca-local.yml file at .hal/defaluts/profiles
--------------------------------------------------
sql:
  enabled: true
  connectionPool:
    jdbcUrl: jdbc:mysql://localhost:3306/orca     #mysql-servicename.namespace:3306
    user: orca_service
    password: opsmx123
    connectionTimeout: 5000
    maxLifetime: 30000
    # MariaDB-specific:
    maxPoolSize: 50
  migration:
    jdbcUrl: jdbc:mysql://localhost:3306/orca
    user: orca_migrate
    password: opsmx123

# Ensure we're only using SQL for accessing execution state
executionRepository:
  sql:
    enabled: true
  redis:
    enabled: false

# Reporting on active execution metrics will be handled by SQL
monitor:
  activeExecutions:
    redis: false
